{
  "hash": "93eb529e0963bb773c9a5d613ad907d1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ndate: \"2024-05-14\"\n---\n\n\nÂ \n\n::: {.alert .alert-info}\n## **Objetive** {.unnumbered .unlisted}\n\n-   Demonstrate how to obtain acoustic data from online repositories\n:::\n\nÂ \n\n\n::: {.cell}\n\n:::\n\n\n\n<font size=\"4\">\n\n## Getting recordings from online repositories\n\nThe suwo package offers several functions to query and download recordings (and other media) of animal vocalizations in online repositories. For instance, the following code return recordings metadata from Xeno-Canto:\n\nExample on how to get recording's metadata (no downloading):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(suwo)\n\nphae_his <- query_xenocanto(term = 'Phaethornis hispidus')\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"Obtaining metadata:\"\n29 audio(s) found ðŸ˜€ \n```\n\n\n:::\n:::\n\n\nKeep only song vocalizations:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsong_phae_his <- phae_his[grep(\"song\", ignore.case = TRUE, phae_his$vocalization.type), ]\n```\n:::\n\n\nMap locations using `map_locations()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmap_locations(song_phae_his)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item\" id=\"htmlwidget-841efa83c171541b611f\" style=\"width:100%;height:325px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-841efa83c171541b611f\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org/copyright/\\\">OpenStreetMap<\\/a>,  <a href=\\\"https://opendatacommons.org/licenses/odbl/\\\">ODbL<\\/a>\"}]},{\"method\":\"addAwesomeMarkers\",\"args\":[[-8.751200000000001,-3.6,-3.2653,-12.8659,-11.476,-0.4714,-11.476,-10.53816667,-11.8667,-11.8667,-11.8667,-9.640000000000001,-3.4501],[-68.99379999999999,-73.15000000000001,-72.9295,-71.367,-69.51900000000001,-76.4603,-69.51900000000001,-65.59283333,-71.36669999999999,-71.36669999999999,-71.36669999999999,-55.94,-72.8801],{\"icon\":\"ios-close\",\"markerColor\":[\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\",\"#440154FF\"],\"iconColor\":\"black\",\"spin\":false,\"squareMarker\":false,\"iconRotate\":0,\"font\":\"monospace\",\"prefix\":\"ion\"},null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"<b><a href='https://www.xeno-canto.org/'>metadataC<\\/a><\\/b><br/><i><\\/i><br/> Subspecies: <br/> Country: <br/> Locality: <br/> Voc.type: <br/> Recordist: <b><a href='https://www.xeno-canto.org//download'><br/>listen<\\/a>\",null,null,null,[\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\",\"Phaethornis_hispidus\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]},{\"method\":\"addMiniMap\",\"args\":[null,null,\"bottomright\",150,150,19,19,-5,false,false,false,false,false,false,{\"color\":\"#ff7800\",\"weight\":1,\"clickable\":false},{\"color\":\"#000000\",\"weight\":1,\"clickable\":false,\"opacity\":0,\"fillOpacity\":0},{\"hideText\":\"Hide MiniMap\",\"showText\":\"Show MiniMap\"},[]]},{\"method\":\"addEasyButton\",\"args\":[{\"icon\":\"fa-globe\",\"title\":\"Zoom to full view\",\"onClick\":\"function(btn, map){ map.setZoom(1); }\",\"position\":\"topleft\"}]}],\"limits\":{\"lat\":[-12.8659,-0.4714],\"lng\":[-76.4603,-55.94]}},\"evals\":[\"calls.3.args.0.onClick\"],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\nOnce you feel fine with the subset of data you can go ahead and download it as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndownload_media(metadata = song_phae_his, \n         path = \"DIRECTORY WHERE YOU WANT TO SAVE THE FILES\")\n```\n:::\n\n\n------------------------------------------------------------------------\n\n<font size=\"4\">Session information</font>\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nR version 4.3.2 (2023-10-31)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: Ubuntu 22.04.2 LTS\n\nMatrix products: default\nBLAS:   /usr/lib/x86_64-linux-gnu/blas/libblas.so.3.10.0 \nLAPACK: /usr/lib/x86_64-linux-gnu/lapack/liblapack.so.3.10.0\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\ntime zone: America/Costa_Rica\ntzcode source: system (glibc)\n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] suwo_0.1.0      jsonlite_1.8.8  RCurl_1.98-1.14\n\nloaded via a namespace (and not attached):\n [1] gtable_0.3.4      rjson_0.2.21      dplyr_1.1.4       compiler_4.3.2   \n [5] tidyselect_1.2.0  bitops_1.0-7      leaflet_2.2.1     parallel_4.3.2   \n [9] gridExtra_2.3     jquerylib_0.1.4   scales_1.3.0      yaml_2.3.8       \n[13] fastmap_1.1.1     ggplot2_3.5.1     R6_2.5.1          generics_0.1.3   \n[17] knitr_1.46        htmlwidgets_1.6.4 viridis_0.6.5     backports_1.4.1  \n[21] checkmate_2.3.1   tibble_3.2.1      munsell_0.5.0     pillar_1.9.0     \n[25] rlang_1.1.3       utf8_1.2.4        xfun_0.43         viridisLite_0.4.2\n[29] cli_3.6.2         magrittr_2.0.3    crosstalk_1.2.1   digest_0.6.35    \n[33] grid_4.3.2        rstudioapi_0.15.0 pbapply_1.7-2     lifecycle_1.0.4  \n[37] vctrs_0.6.5       evaluate_0.23     glue_1.7.0        fansi_1.0.6      \n[41] colorspace_2.1-0  rmarkdown_2.26    tools_4.3.2       pkgconfig_2.0.3  \n[45] htmltools_0.5.8.1\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-binding-2.2.1/leaflet.js\"></script>\n<link href=\"site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js\"></script>\n<link href=\"site_libs/ionicons-2.0.1/ionicons.min.css\" rel=\"stylesheet\" />\n<link href=\"site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js\"></script>\n<script src=\"site_libs/leaflet-minimap-3.3.1/Minimap-binding.js\"></script>\n<link href=\"site_libs/leaflet-easybutton-1.3.1/easy-button.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-easybutton-1.3.1/easy-button.js\"></script>\n<script src=\"site_libs/leaflet-easybutton-1.3.1/EasyButton-binding.js\"></script>\n<link href=\"site_libs/fontawesome-4.7.0/font-awesome.min.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}